(function(s,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(s=typeof globalThis<"u"?globalThis:s||self,f(s.ui={}))})(this,function(s){"use strict";class f{constructor(){this.listeners={}}addListener(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(l=>l!==t))}dispatch(e,t){this.listeners[e]&&this.listeners[e].forEach(l=>l(t))}}class S{constructor(e){this.prefix="",this.events=new f,this.data={},this.prefix=e}get(e,t){if(!(t!=null&&t.skipStore)){const l=localStorage.getItem(`${this.prefix}${e}`);if(l!==null)return JSON.parse(l)}if(this.data.hasOwnProperty(e))return this.data[e]}set(e,t,l=!1,r){if(l){let a=null;r!=null&&r.skipStore?a=null:a=localStorage.getItem(`${this.prefix}${e}`),a!==null?this.data[e]=JSON.parse(a):this.data.hasOwnProperty(e)||(this.data[e]=t)}else this.data[e]=t;r!=null&&r.skipStore||localStorage.setItem(`${this.prefix}${e}`,JSON.stringify(this.data[e])),this.events.dispatch(e,this.data[e])}update(e,t,l){const r=this.get(e,l);if(r===void 0)throw new Error(`"${e}" not found, use \`set\``);this.set(e,t(r),!1,l)}listen(e,t,l=!1,r){if(l){const a=this.get(e,r);a!==void 0&&setTimeout(()=>t(a))}return this.events.addListener(e,t)}}const L={onDragStart:null,onDragging:null,onDragEnd:null};function D(n,e,t){t={...L,...t};const l=[...n.children].indexOf(e);return e.draggable=!0,e.ondragstart=r=>{r.dataTransfer&&(r.dataTransfer.effectAllowed="move",r.dataTransfer.dropEffect="move"),n.classList.add("ui-dragging"),t.onDragStart&&t.onDragStart(l)},e.ondragover=r=>(r.preventDefault(),!1),e.ondragenter=r=>{r.preventDefault(),[...n.children].forEach((a,u)=>{if(u===l){a.style.background="var(--ui-primary)",a.style.color="var(--ui-primary-text)";return}a.style.background="inherit",a.style.color="inherit"}),t.onDragging&&t.onDragging(l)},e.ondrop=r=>{r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"),n.classList.remove("ui-dragging"),t.onDragEnd&&t.onDragEnd(l),[...n.children].forEach(a=>{a.style.background="inherit",a.style.color="inherit"})},()=>{e.draggable=!1,e.ondragstart=null,e.ondragover=null,e.ondragenter=null,e.ondrop=null}}const T={onDragStart:null,onDragEnd:null};function $(n,e){e={...T,...e};let t=null,l=null,r=null,a=!1,u="",c="";const E=i=>{const d=i.currentTarget;!t&&Array.from(d.classList).includes("draggable")&&(l=new Date().getTime(),t=d,r&&clearTimeout(r),r=setTimeout(()=>{t&&(u=t.style.color,c=t.style.backgroundColor,t.style.color="var(--ui-primary-text)",t.style.backgroundColor="var(--ui-primary)",n.classList.add("ui-dragging"),a=!0,e!=null&&e.onDragStart&&e.onDragStart())},200))},b=i=>{if(!l||!t)return;if(!a&&new Date().getTime()-l<200){v();return}i.preventDefault(),a||(a=!0,e!=null&&e.onDragStart&&e.onDragStart());let d;if(i instanceof TouchEvent){const p=i.targetTouches[0];d={clientX:p.clientX,clientY:p.clientY}}else d={clientX:i.clientX,clientY:i.clientY};let o=document.elementFromPoint(d.clientX,d.clientY);if(o){for(;!o.classList.contains("draggable")&&o.parentElement;)o=o.parentElement;o.classList.contains("draggable")&&((()=>{let g=t==null?void 0:t.previousElementSibling;for(;g;){if(g===o)return!0;g=g.previousElementSibling}return!1})()?n.insertBefore(t,o):n.insertBefore(t,o.nextElementSibling))}},v=()=>{r!==null&&(clearTimeout(r),r=null),t&&(t.style.color=u,t.style.backgroundColor=c,t=null),l=null,n.classList.remove("ui-dragging"),a&&(a=!1,e!=null&&e.onDragEnd&&e.onDragEnd())};return[...n.children].forEach(i=>{i.classList.add("draggable"),i.onmousedown=E,i.ontouchstart=E,i.onmousemove=b,i.ontouchmove=b,n.onmouseleave=i.onmouseup=v,i.ontouchend=v}),()=>{[...n.children].forEach(i=>{i.classList.remove("draggable"),i.onmousedown=null,i.ontouchstart=null,i.onmousemove=null,i.ontouchmove=null,n.onmouseleave=i.onmouseup=null,i.ontouchend=null})}}const w=Object.freeze(Object.defineProperty({__proto__:null,createMobile:$,createNative:D},Symbol.toStringTag,{value:"Module"})),y={color:"var(--ui-ripple-color, currentColor)",opacity:"var(--ui-ripple-opacity, 0.2)",centered:!1,spreadDuration:".4s",spreadTiming:"linear",clearDuration:"1s",clearTiming:"ease-in-out",usePointer:!1};function x(n,e){e={...y,...e||{}};let t=null;const l=c=>{t=m(c,e),n.addEventListener("pointermove",a)},r=()=>{n.removeEventListener("pointermove",a),h(t),t=null},a=()=>r(),u=c=>{t=m(c,e),h(t),t=null};return n.classList.add("ripple-container"),n.style.overflow="hidden",e.usePointer?(n.addEventListener("pointerdown",l),n.addEventListener("pointerup",r),n.addEventListener("pointerleave",r)):n.addEventListener("click",u),()=>{if(n.classList.remove("ripple-container"),e.usePointer){n.removeEventListener("pointerdown",l),n.removeEventListener("pointerup",r),n.removeEventListener("pointerleave",r),n.removeEventListener("pointermove",a);return}n.removeEventListener("click",u)}}function m(n,e){const t=document.createElement("div"),l=n.currentTarget;l.appendChild(t),t.classList.add("ripple"),t.style.position="absolute",t.style.color="inherit",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.width="100px",t.style.height="100px",t.style.marginTop="-50px",t.style.marginLeft="-50px",t.style.opacity=`${e.opacity}`,t.style.backgroundColor=`${e.color}`,t.style.transform="scale(0) translate(0, 0)",t.style.transition=`transform ${e.spreadDuration} ${e.spreadTiming} 0s,opacity ${e.clearDuration} ${e.clearTiming} 0s`;const r=l.getBoundingClientRect();e.centered?(t.style.top=`${r.height/2}px`,t.style.left=`${r.width/2}px`):(t.style.top=`${n.clientY-r.top}px`,t.style.left=`${n.clientX-r.left}px`);const a=Math.max(r.width,r.height)*.02;return t.style.transform=`scale(${a}) translate(0, 0)`,t}function h(n){n&&(n.addEventListener("transitionend",e=>{e.propertyName==="opacity"&&n.remove()}),n.style.opacity="0")}const O=Object.freeze(Object.defineProperty({__proto__:null,create:x,defaultOptions:y,start:m,stop:h},Symbol.toStringTag,{value:"Module"}));function P(){return/(android)/i.test(navigator.userAgent)}function C(n){return Object.entries(n).map(([e,t])=>`${e.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`)}:${t}`).join(";")+";"}s.Events=f,s.Store=S,s.draggable=w,s.isAndroid=P,s.ripple=O,s.styles=C,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
