(function(s,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(s=typeof globalThis<"u"?globalThis:s||self,c(s.ui={}))})(this,function(s){"use strict";class c{constructor(){this.listeners={}}addListener(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(a=>a!==t))}dispatch(e,t){this.listeners[e]&&this.listeners[e].forEach(a=>a(t))}}class L{constructor(e){this.prefix="",this.events=new c,this.data={},this.prefix=e}get(e,t){if(!(t!=null&&t.skipStore)){const a=localStorage.getItem(`${this.prefix}${e}`);if(a!==null)return JSON.parse(a)}if(this.data.hasOwnProperty(e))return this.data[e]}set(e,t,a=!1,n){if(a){let l=null;n!=null&&n.skipStore?l=null:l=localStorage.getItem(`${this.prefix}${e}`),l!==null?this.data[e]=JSON.parse(l):this.data.hasOwnProperty(e)||(this.data[e]=t)}else this.data[e]=t;n!=null&&n.skipStore||localStorage.setItem(`${this.prefix}${e}`,JSON.stringify(this.data[e])),this.events.dispatch(e,this.data[e])}update(e,t,a){const n=this.get(e,a);if(n===void 0)throw new Error(`"${e}" not found, use \`set\``);this.set(e,t(n),!1,a)}listen(e,t,a=!1,n){if(a){const l=this.get(e,n);l!==void 0&&setTimeout(()=>t(l))}return this.events.addListener(e,t)}}class S{constructor(){this.data={},this._lang=""}get lang(){return this._lang}use(e,t){return new Promise((a,n)=>{fetch(t).then(l=>l.json()).then(l=>{this._lang=e,this.data=l,a(this)}).catch(l=>n(l))})}get(...e){const t=e.join(":");return this.data[t]||t}}const T={onDragStart:null,onDragging:null,onDragEnd:null};function w(r,e,t){t={...T,...t};const a=[...r.children].indexOf(e);return e.draggable=!0,e.ondragstart=n=>{n.dataTransfer&&(n.dataTransfer.effectAllowed="move",n.dataTransfer.dropEffect="move"),r.classList.add("ui-dragging"),t.onDragStart&&t.onDragStart(a)},e.ondragover=n=>(n.preventDefault(),!1),e.ondragenter=n=>{n.preventDefault(),[...r.children].forEach((l,o)=>{if(o===a){l.style.background="var(--ui-primary)",l.style.color="var(--ui-primary-text)";return}l.style.background="inherit",l.style.color="inherit"}),t.onDragging&&t.onDragging(a)},e.ondrop=n=>{n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="move"),r.classList.remove("ui-dragging"),t.onDragEnd&&t.onDragEnd(a),[...r.children].forEach(l=>{l.style.background="inherit",l.style.color="inherit"})},()=>{e.draggable=!1,e.ondragstart=null,e.ondragover=null,e.ondragenter=null,e.ondrop=null}}const D={onDragStart:null,onDragEnd:null};function $(r,e){e={...D,...e};let t=null,a=null,n=null,l=!1,o="",f="";const E=i=>{const d=i.currentTarget;!t&&Array.from(d.classList).includes("draggable")&&(a=new Date().getTime(),t=d,n&&clearTimeout(n),n=setTimeout(()=>{t&&(o=t.style.color,f=t.style.backgroundColor,t.style.color="var(--ui-primary-text)",t.style.backgroundColor="var(--ui-primary)",r.classList.add("ui-dragging"),l=!0,e!=null&&e.onDragStart&&e.onDragStart())},200))},b=i=>{if(!a||!t)return;if(!l&&new Date().getTime()-a<200){v();return}i.preventDefault(),l||(l=!0,e!=null&&e.onDragStart&&e.onDragStart());let d;if(i instanceof TouchEvent){const p=i.targetTouches[0];d={clientX:p.clientX,clientY:p.clientY}}else d={clientX:i.clientX,clientY:i.clientY};let u=document.elementFromPoint(d.clientX,d.clientY);if(u){for(;!u.classList.contains("draggable")&&u.parentElement;)u=u.parentElement;u.classList.contains("draggable")&&((()=>{let g=t==null?void 0:t.previousElementSibling;for(;g;){if(g===u)return!0;g=g.previousElementSibling}return!1})()?r.insertBefore(t,u):r.insertBefore(t,u.nextElementSibling))}},v=()=>{n!==null&&(clearTimeout(n),n=null),t&&(t.style.color=o,t.style.backgroundColor=f,t=null),a=null,r.classList.remove("ui-dragging"),l&&(l=!1,e!=null&&e.onDragEnd&&e.onDragEnd())};return[...r.children].forEach(i=>{i.classList.add("draggable"),i.onmousedown=E,i.ontouchstart=E,i.onmousemove=b,i.ontouchmove=b,r.onmouseleave=i.onmouseup=v,i.ontouchend=v}),()=>{[...r.children].forEach(i=>{i.classList.remove("draggable"),i.onmousedown=null,i.ontouchstart=null,i.onmousemove=null,i.ontouchmove=null,r.onmouseleave=i.onmouseup=null,i.ontouchend=null})}}const x=Object.freeze(Object.defineProperty({__proto__:null,createMobile:$,createNative:w},Symbol.toStringTag,{value:"Module"})),y={color:"var(--ui-ripple-color, currentColor)",opacity:"var(--ui-ripple-opacity, 0.2)",centered:!1,spreadDuration:".4s",spreadTiming:"linear",clearDuration:"1s",clearTiming:"ease-in-out",usePointer:!1};function O(r,e){e={...y,...e||{}};let t=null;const a=f=>{t=h(f,e),r.addEventListener("pointermove",l)},n=()=>{r.removeEventListener("pointermove",l),m(t),t=null},l=()=>n(),o=f=>{t=h(f,e),m(t),t=null};return r.classList.add("ripple-container"),r.style.overflow="hidden",e.usePointer?(r.addEventListener("pointerdown",a),r.addEventListener("pointerup",n),r.addEventListener("pointerleave",n)):r.addEventListener("click",o),()=>{if(r.classList.remove("ripple-container"),e.usePointer){r.removeEventListener("pointerdown",a),r.removeEventListener("pointerup",n),r.removeEventListener("pointerleave",n),r.removeEventListener("pointermove",l);return}r.removeEventListener("click",o)}}function h(r,e){const t=document.createElement("div"),a=r.currentTarget;a.appendChild(t),t.classList.add("ripple"),t.style.position="absolute",t.style.color="inherit",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.width="100px",t.style.height="100px",t.style.marginTop="-50px",t.style.marginLeft="-50px",t.style.opacity=`${e.opacity}`,t.style.backgroundColor=`${e.color}`,t.style.transform="scale(0) translate(0, 0)",t.style.transition=`transform ${e.spreadDuration} ${e.spreadTiming} 0s,opacity ${e.clearDuration} ${e.clearTiming} 0s`;const n=a.getBoundingClientRect();e.centered?(t.style.top=`${n.height/2}px`,t.style.left=`${n.width/2}px`):(t.style.top=`${r.clientY-n.top}px`,t.style.left=`${r.clientX-n.left}px`);const l=Math.max(n.width,n.height)*.02;return t.style.transform=`scale(${l}) translate(0, 0)`,t}function m(r){r&&(r.addEventListener("transitionend",e=>{e.propertyName==="opacity"&&r.remove()}),r.style.opacity="0")}const _=Object.freeze(Object.defineProperty({__proto__:null,create:O,defaultOptions:y,start:h,stop:m},Symbol.toStringTag,{value:"Module"}));function P(r){function e(t){fetch(t.template).then(a=>a.text()).then(a=>{const n=document.querySelector("head > title");n!==null&&(n.innerHTML=t.title),document.body.innerHTML=a,t.scripts.forEach(l=>{const o=document.createElement("script");o.setAttribute("data-template",t.template),o.src=l.src,document.body.appendChild(o)})}).catch(a=>alert(a))}window.addEventListener("hashchange",()=>{const t=window.location.hash.replace("#",""),a=Object.keys(r).find(n=>t.startsWith(n));e(a!==void 0?r[a]:r["/"])}),window.dispatchEvent(new Event("hashchange"))}const j=Object.freeze(Object.defineProperty({__proto__:null,hash:P},Symbol.toStringTag,{value:"Module"}));function C(){return/(android)/i.test(navigator.userAgent)}function M(r){return Object.entries(r).map(([e,t])=>`${e.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}:${t}`).join(";")+";"}s.Events=c,s.LanguageHandler=S,s.Store=L,s.draggable=x,s.isAndroid=C,s.ripple=_,s.router=j,s.styles=M,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
