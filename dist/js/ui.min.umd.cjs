(function(u,g){typeof exports=="object"&&typeof module<"u"?g(exports):typeof define=="function"&&define.amd?define(["exports"],g):(u=typeof globalThis<"u"?globalThis:u||self,g(u.ui={}))})(this,function(u){"use strict";class g{constructor(){this.listeners={}}addListener(t,e){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),()=>this.removeListener(t,e)}removeListener(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(l=>l!==e))}dispatch(t,e){this.listeners[t]&&this.listeners[t].forEach(l=>l(e))}}class S{constructor(t){this.prefix="",this.events=new g,this.data={},this.prefix=t}delete(t,e){e!=null&&e.skipStore||localStorage.removeItem(`${this.prefix}${t}`),delete this.data[t]}get(t,e){if(!(e!=null&&e.skipStore)){const l=localStorage.getItem(`${this.prefix}${t}`);if(l!==null)return JSON.parse(l)}if(this.data.hasOwnProperty(t))return this.data[t]}set(t,e,l=!1,r){if(l){let i=null;r!=null&&r.skipStore?i=null:i=localStorage.getItem(`${this.prefix}${t}`),i!==null?this.data[t]=JSON.parse(i):this.data.hasOwnProperty(t)||(this.data[t]=e)}else this.data[t]=e;r!=null&&r.skipStore||localStorage.setItem(`${this.prefix}${t}`,JSON.stringify(this.data[t])),this.events.dispatch(t,this.data[t])}update(t,e,l){const r=this.get(t,l);if(r===void 0)throw new Error(`"${t}" not found, use \`set\``);this.set(t,e(r),!1,l)}listen(t,e,l=!1,r){if(l){const i=this.get(t,r);i!==void 0&&setTimeout(()=>e(i))}return this.events.addListener(t,e)}}const L={onDragStart:null,onDragging:null,onDragEnd:null};function T(n,t,e){e={...L,...e};const l=[...n.children].indexOf(t);return t.draggable=!0,t.ondragstart=r=>{r.dataTransfer&&(r.dataTransfer.effectAllowed="move",r.dataTransfer.dropEffect="move"),n.classList.add("ui-dragging"),e.onDragStart&&e.onDragStart(l)},t.ondragover=r=>(r.preventDefault(),!1),t.ondragenter=r=>{r.preventDefault(),[...n.children].forEach((i,s)=>{if(s===l){i.style.background="var(--ui-primary)",i.style.color="var(--ui-primary-text)";return}i.style.background="inherit",i.style.color="inherit"}),e.onDragging&&e.onDragging(l)},t.ondrop=r=>{r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"),n.classList.remove("ui-dragging"),e.onDragEnd&&e.onDragEnd(l),[...n.children].forEach(i=>{i.style.background="inherit",i.style.color="inherit"})},()=>{t.draggable=!1,t.ondragstart=null,t.ondragover=null,t.ondragenter=null,t.ondrop=null}}const $={onDragStart:null,onDragEnd:null};function w(n,t){t={...$,...t};let e=null,l=null,r=null,i=!1,s="",o="";const d=a=>{const m=a.currentTarget;!e&&Array.from(m.classList).includes("draggable")&&(l=new Date().getTime(),e=m,r&&clearTimeout(r),r=setTimeout(()=>{e&&(s=e.style.color,o=e.style.backgroundColor,e.style.color="var(--ui-primary-text)",e.style.backgroundColor="var(--ui-primary)",n.classList.add("ui-dragging"),i=!0,t!=null&&t.onDragStart&&t.onDragStart())},200))},h=a=>{if(!l||!e)return;if(!i&&new Date().getTime()-l<200){f();return}a.preventDefault(),i||(i=!0,t!=null&&t.onDragStart&&t.onDragStart());let m;if(a instanceof TouchEvent){const E=a.targetTouches[0];m={clientX:E.clientX,clientY:E.clientY}}else m={clientX:a.clientX,clientY:a.clientY};let c=document.elementFromPoint(m.clientX,m.clientY);if(c){for(;!c.classList.contains("draggable")&&c.parentElement;)c=c.parentElement;c.classList.contains("draggable")&&((()=>{let p=e==null?void 0:e.previousElementSibling;for(;p;){if(p===c)return!0;p=p.previousElementSibling}return!1})()?n.insertBefore(e,c):n.insertBefore(e,c.nextElementSibling))}},f=()=>{r!==null&&(clearTimeout(r),r=null),e&&(e.style.color=s,e.style.backgroundColor=o,e=null),l=null,n.classList.remove("ui-dragging"),i&&(i=!1,t!=null&&t.onDragEnd&&t.onDragEnd())};return[...n.children].forEach(a=>{a.classList.add("draggable"),a.onmousedown=d,a.ontouchstart=d,a.onmousemove=h,a.ontouchmove=h,n.onmouseleave=a.onmouseup=f,a.ontouchend=f}),()=>{[...n.children].forEach(a=>{a.classList.remove("draggable"),a.onmousedown=null,a.ontouchstart=null,a.onmousemove=null,a.ontouchmove=null,n.onmouseleave=a.onmouseup=null,a.ontouchend=null})}}const D=Object.freeze(Object.defineProperty({__proto__:null,createMobile:w,createNative:T},Symbol.toStringTag,{value:"Module"})),b={color:"var(--ui-ripple-color, currentColor)",opacity:"var(--ui-ripple-opacity, 0.2)",centered:!1,spreadDuration:".4s",spreadTiming:"linear",clearDuration:"1s",clearTiming:"ease-in-out",usePointer:!1};function O(n,t){t={...b,...t||{}};let e=null;const l=o=>{e=v(o,t),n.addEventListener("pointermove",i)},r=()=>{n.removeEventListener("pointermove",i),y(e),e=null},i=()=>r(),s=o=>{e=v(o,t),y(e),e=null};return n.classList.add("ripple-container"),n.style.overflow="hidden",t.usePointer?(n.addEventListener("pointerdown",l),n.addEventListener("pointerup",r),n.addEventListener("pointerleave",r)):n.addEventListener("click",s),()=>{if(n.classList.remove("ripple-container"),t.usePointer){n.removeEventListener("pointerdown",l),n.removeEventListener("pointerup",r),n.removeEventListener("pointerleave",r),n.removeEventListener("pointermove",i);return}n.removeEventListener("click",s)}}function v(n,t){const e=document.createElement("div"),l=n.currentTarget;l.appendChild(e),e.classList.add("ripple"),e.style.position="absolute",e.style.color="inherit",e.style.borderRadius="50%",e.style.pointerEvents="none",e.style.width="100px",e.style.height="100px",e.style.marginTop="-50px",e.style.marginLeft="-50px",e.style.opacity=`${t.opacity}`,e.style.backgroundColor=`${t.color}`,e.style.transform="scale(0) translate(0, 0)",e.style.transition=`transform ${t.spreadDuration} ${t.spreadTiming} 0s,opacity ${t.clearDuration} ${t.clearTiming} 0s`;const r=l.getBoundingClientRect();t.centered?(e.style.top=`${r.height/2}px`,e.style.left=`${r.width/2}px`):(e.style.top=`${n.clientY-r.top}px`,e.style.left=`${n.clientX-r.left}px`);const i=Math.max(r.width,r.height)*.02;return e.style.transform=`scale(${i}) translate(0, 0)`,e}function y(n){n&&(n.addEventListener("transitionend",t=>{t.propertyName==="opacity"&&n.remove()}),n.style.opacity="0")}const x=Object.freeze(Object.defineProperty({__proto__:null,create:O,defaultOptions:b,start:v,stop:y},Symbol.toStringTag,{value:"Module"}));function M(n,t){let e=null;async function l(r){var i,s;if(e!==null&&(((i=e.template)==null?void 0:i.onDestroy)!==void 0&&e.template.onDestroy(),e.onDestroy!==void 0&&e.onDestroy()),e=r,e.title!==void 0){const o=document.querySelector("head > title");o!==null&&(o.innerHTML=e.title)}if((e==null?void 0:e.href)!==void 0&&n){const d=await(await fetch(e.href)).text();n.innerHTML=d,e.scripts!==void 0&&e.scripts.forEach(h=>{const f=document.createElement("script");f.setAttribute("data-template",e.href),f.src=h.src,n.appendChild(f)})}if((e==null?void 0:e.onMount)!==void 0&&e.onMount(),e!=null&&e.template){let o=n;if(e.template.target!==void 0&&(o=document.querySelector(e.template.target)),e.template.selector&&o){const d=document.querySelector(e.template.selector);if(!d)throw`${e.template.selector} not found`;d instanceof HTMLTemplateElement?(o.innerHTML="",o.appendChild(d.content.cloneNode(!0))):o.innerHTML=d.innerHTML}((s=e.template)==null?void 0:s.onMount)!==void 0&&e.template.onMount()}}window.addEventListener("hashchange",()=>{const r=window.location.hash.replace("#","");let i="";for(const s of Object.keys(t))r.startsWith(s)&&s>i&&(i=s);if(!i){const s=t["/"];if(s===void 0){console.warn(`Window location “${r}” is missing in routes, and the fallback route “/“ is also missing.`);return}l(s);return}l(t[i])}),window.dispatchEvent(new Event("hashchange"))}function C(n,t){let e;if(n?e=`?${Object.entries(n).map(([l,r])=>`${encodeURIComponent(l)}=${encodeURIComponent(r)}`).join("&")}`:e="",!t&&!e){location.hash="";return}location.hash=`#${encodeURIComponent(t)}`+(e?`&${e}`:"")}function _(){const n={};return location.hash.replace(/^#.*\?/,"").split("?").forEach(t=>{t.split("&").forEach(e=>{const[l,r]=e.split("=");n[decodeURIComponent(l)]=decodeURIComponent(r)})}),n}const j=Object.freeze(Object.defineProperty({__proto__:null,hash:Object.freeze(Object.defineProperty({__proto__:null,getSearchParam:_,goTo:C,init:M},Symbol.toStringTag,{value:"Module"}))},Symbol.toStringTag,{value:"Module"}));function P(){return/(android)/i.test(navigator.userAgent)}function R(n){return Object.entries(n).map(([t,e])=>`${t.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`)}:${e}`).join(";")+";"}u.Events=g,u.Store=S,u.draggable=D,u.isAndroid=P,u.ripple=x,u.router=j,u.styles=R,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
