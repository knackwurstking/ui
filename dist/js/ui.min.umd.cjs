(function(u,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(u=typeof globalThis<"u"?globalThis:u||self,m(u.ui={}))})(this,function(u){"use strict";class m{constructor(){this.listeners={}}addListener(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(n=>n!==t))}dispatch(e,t){this.listeners[e]&&this.listeners[e].forEach(n=>n(t))}}class L{constructor(e){this.prefix="",this.events=new m,this.data={},this.prefix=e}get(e,t){if(!(t!=null&&t.skipStore)){const n=localStorage.getItem(`${this.prefix}${e}`);if(n!==null)return JSON.parse(n)}if(this.data.hasOwnProperty(e))return this.data[e]}set(e,t,n=!1,r){if(n){let i=null;r!=null&&r.skipStore?i=null:i=localStorage.getItem(`${this.prefix}${e}`),i!==null?this.data[e]=JSON.parse(i):this.data.hasOwnProperty(e)||(this.data[e]=t)}else this.data[e]=t;r!=null&&r.skipStore||localStorage.setItem(`${this.prefix}${e}`,JSON.stringify(this.data[e])),this.events.dispatch(e,this.data[e])}update(e,t,n){const r=this.get(e,n);if(r===void 0)throw new Error(`"${e}" not found, use \`set\``);this.set(e,t(r),!1,n)}listen(e,t,n=!1,r){if(n){const i=this.get(e,r);i!==void 0&&setTimeout(()=>t(i))}return this.events.addListener(e,t)}}class S{constructor(){this.data={},this._lang=""}get lang(){return this._lang}use(e,t){return new Promise((n,r)=>{fetch(t).then(i=>i.json()).then(i=>{this._lang=e,this.data=i,n(this)}).catch(i=>r(i))})}get(...e){const t=e.join(":");return this.data[t]||t}}const w={onDragStart:null,onDragging:null,onDragEnd:null};function T(a,e,t){t={...w,...t};const n=[...a.children].indexOf(e);return e.draggable=!0,e.ondragstart=r=>{r.dataTransfer&&(r.dataTransfer.effectAllowed="move",r.dataTransfer.dropEffect="move"),a.classList.add("ui-dragging"),t.onDragStart&&t.onDragStart(n)},e.ondragover=r=>(r.preventDefault(),!1),e.ondragenter=r=>{r.preventDefault(),[...a.children].forEach((i,o)=>{if(o===n){i.style.background="var(--ui-primary)",i.style.color="var(--ui-primary-text)";return}i.style.background="inherit",i.style.color="inherit"}),t.onDragging&&t.onDragging(n)},e.ondrop=r=>{r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"),a.classList.remove("ui-dragging"),t.onDragEnd&&t.onDragEnd(n),[...a.children].forEach(i=>{i.style.background="inherit",i.style.color="inherit"})},()=>{e.draggable=!1,e.ondragstart=null,e.ondragover=null,e.ondragenter=null,e.ondrop=null}}const D={onDragStart:null,onDragEnd:null};function $(a,e){e={...D,...e};let t=null,n=null,r=null,i=!1,o="",s="";const d=l=>{const g=l.currentTarget;!t&&Array.from(g.classList).includes("draggable")&&(n=new Date().getTime(),t=g,r&&clearTimeout(r),r=setTimeout(()=>{t&&(o=t.style.color,s=t.style.backgroundColor,t.style.color="var(--ui-primary-text)",t.style.backgroundColor="var(--ui-primary)",a.classList.add("ui-dragging"),i=!0,e!=null&&e.onDragStart&&e.onDragStart())},200))},f=l=>{if(!n||!t)return;if(!i&&new Date().getTime()-n<200){h();return}l.preventDefault(),i||(i=!0,e!=null&&e.onDragStart&&e.onDragStart());let g;if(l instanceof TouchEvent){const E=l.targetTouches[0];g={clientX:E.clientX,clientY:E.clientY}}else g={clientX:l.clientX,clientY:l.clientY};let c=document.elementFromPoint(g.clientX,g.clientY);if(c){for(;!c.classList.contains("draggable")&&c.parentElement;)c=c.parentElement;c.classList.contains("draggable")&&((()=>{let p=t==null?void 0:t.previousElementSibling;for(;p;){if(p===c)return!0;p=p.previousElementSibling}return!1})()?a.insertBefore(t,c):a.insertBefore(t,c.nextElementSibling))}},h=()=>{r!==null&&(clearTimeout(r),r=null),t&&(t.style.color=o,t.style.backgroundColor=s,t=null),n=null,a.classList.remove("ui-dragging"),i&&(i=!1,e!=null&&e.onDragEnd&&e.onDragEnd())};return[...a.children].forEach(l=>{l.classList.add("draggable"),l.onmousedown=d,l.ontouchstart=d,l.onmousemove=f,l.ontouchmove=f,a.onmouseleave=l.onmouseup=h,l.ontouchend=h}),()=>{[...a.children].forEach(l=>{l.classList.remove("draggable"),l.onmousedown=null,l.ontouchstart=null,l.onmousemove=null,l.ontouchmove=null,a.onmouseleave=l.onmouseup=null,l.ontouchend=null})}}const x=Object.freeze(Object.defineProperty({__proto__:null,createMobile:$,createNative:T},Symbol.toStringTag,{value:"Module"})),b={color:"var(--ui-ripple-color, currentColor)",opacity:"var(--ui-ripple-opacity, 0.2)",centered:!1,spreadDuration:".4s",spreadTiming:"linear",clearDuration:"1s",clearTiming:"ease-in-out",usePointer:!1};function M(a,e){e={...b,...e||{}};let t=null;const n=s=>{t=v(s,e),a.addEventListener("pointermove",i)},r=()=>{a.removeEventListener("pointermove",i),y(t),t=null},i=()=>r(),o=s=>{t=v(s,e),y(t),t=null};return a.classList.add("ripple-container"),a.style.overflow="hidden",e.usePointer?(a.addEventListener("pointerdown",n),a.addEventListener("pointerup",r),a.addEventListener("pointerleave",r)):a.addEventListener("click",o),()=>{if(a.classList.remove("ripple-container"),e.usePointer){a.removeEventListener("pointerdown",n),a.removeEventListener("pointerup",r),a.removeEventListener("pointerleave",r),a.removeEventListener("pointermove",i);return}a.removeEventListener("click",o)}}function v(a,e){const t=document.createElement("div"),n=a.currentTarget;n.appendChild(t),t.classList.add("ripple"),t.style.position="absolute",t.style.color="inherit",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.width="100px",t.style.height="100px",t.style.marginTop="-50px",t.style.marginLeft="-50px",t.style.opacity=`${e.opacity}`,t.style.backgroundColor=`${e.color}`,t.style.transform="scale(0) translate(0, 0)",t.style.transition=`transform ${e.spreadDuration} ${e.spreadTiming} 0s,opacity ${e.clearDuration} ${e.clearTiming} 0s`;const r=n.getBoundingClientRect();e.centered?(t.style.top=`${r.height/2}px`,t.style.left=`${r.width/2}px`):(t.style.top=`${a.clientY-r.top}px`,t.style.left=`${a.clientX-r.left}px`);const i=Math.max(r.width,r.height)*.02;return t.style.transform=`scale(${i}) translate(0, 0)`,t}function y(a){a&&(a.addEventListener("transitionend",e=>{e.propertyName==="opacity"&&a.remove()}),a.style.opacity="0")}const O=Object.freeze(Object.defineProperty({__proto__:null,create:M,defaultOptions:b,start:v,stop:y},Symbol.toStringTag,{value:"Module"}));function _(a,e){let t=!1,n=null;async function r(i){var o,s;if(location.hash.match(/.*\?+/)){const[d,f]=location.hash.split("?",2),h=location.origin+location.pathname+`?${f}`+d;history.pushState({path:h,modified:!0},"",h),t=!0}else t=!1;if(n!==null&&(((o=n.template)==null?void 0:o.onDestroy)!==void 0&&n.template.onDestroy(),n.onDestroy!==void 0&&n.onDestroy()),n=i,n.title!==void 0){const d=document.querySelector("head > title");d!==null&&(d.innerHTML=n.title)}if((n==null?void 0:n.href)!==void 0){const f=await(await fetch(n.href)).text();a.innerHTML=f,n.scripts!==void 0&&n.scripts.forEach(h=>{const l=document.createElement("script");l.setAttribute("data-template",n.href),l.src=h.src,a.appendChild(l)})}if((n==null?void 0:n.onMount)!==void 0&&n.onMount(),(n==null?void 0:n.template)!==void 0){let d=a;n.template.target!==void 0&&(d=document.querySelector(n.template.target));const f=document.querySelector(n.template.selector);if(f===null)throw`${n.template.selector} not found`;f instanceof HTMLTemplateElement?(d.innerHTML="",d.appendChild(f.content.cloneNode(!0))):d.innerHTML=f.innerHTML,((s=n.template)==null?void 0:s.onMount)!==void 0&&n.template.onMount()}}window.addEventListener("popstate",()=>{t&&(history.back(),t=!1)}),window.addEventListener("hashchange",()=>{const i=window.location.hash.replace("#","");let o="";for(const s of Object.keys(e))i.startsWith(s)&&s>o&&(o=s);if(!o){const s=e["/"];if(s===void 0){console.warn(`Window location “${i}” is missing in routes, and the fallback route “/“ is also missing.`);return}r(s);return}r(e[o])}),window.dispatchEvent(new Event("hashchange"))}const P=Object.freeze(Object.defineProperty({__proto__:null,hash:_},Symbol.toStringTag,{value:"Module"}));function j(){return/(android)/i.test(navigator.userAgent)}function C(a){return Object.entries(a).map(([e,t])=>`${e.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}:${t}`).join(";")+";"}u.Events=m,u.LanguageHandler=S,u.Store=L,u.draggable=x,u.isAndroid=j,u.ripple=O,u.router=P,u.styles=C,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
