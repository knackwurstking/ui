class E {
  constructor() {
    this.listeners = {};
  }
  addListener(t, e) {
    return this.listeners[t] || (this.listeners[t] = []), this.listeners[t].push(e), () => this.removeListener(t, e);
  }
  removeListener(t, e) {
    this.listeners[t] && (this.listeners[t] = this.listeners[t].filter((l) => l !== e));
  }
  dispatch(t, e) {
    this.listeners[t] && this.listeners[t].forEach((l) => l(e));
  }
}
class _ {
  constructor(t) {
    this.prefix = "", this.events = new E(), this.data = {}, this.prefix = t;
  }
  delete(t, e) {
    e != null && e.skipStore || localStorage.removeItem(`${this.prefix}${t}`), delete this.data[t];
  }
  get(t, e) {
    if (!(e != null && e.skipStore)) {
      const l = localStorage.getItem(`${this.prefix}${t}`);
      if (l !== null) return JSON.parse(l);
    }
    if (this.data.hasOwnProperty(t))
      return this.data[t];
  }
  set(t, e, l = !1, r) {
    if (l) {
      let a = null;
      r != null && r.skipStore ? a = null : a = localStorage.getItem(`${this.prefix}${t}`), a !== null ? this.data[t] = JSON.parse(a) : this.data.hasOwnProperty(t) || (this.data[t] = e);
    } else
      this.data[t] = e;
    r != null && r.skipStore || localStorage.setItem(
      `${this.prefix}${t}`,
      JSON.stringify(this.data[t])
    ), this.events.dispatch(t, this.data[t]);
  }
  update(t, e, l) {
    const r = this.get(t, l);
    if (r === void 0)
      throw new Error(`"${t}" not found, use \`set\``);
    this.set(t, e(r), !1, l);
  }
  listen(t, e, l = !1, r) {
    if (l) {
      const a = this.get(t, r);
      a !== void 0 && setTimeout(() => e(a));
    }
    return this.events.addListener(t, e);
  }
}
class C {
  constructor() {
    this.data = {}, this._lang = "";
  }
  get lang() {
    return this._lang;
  }
  use(t, e) {
    return new Promise((l, r) => {
      fetch(e).then((a) => a.json()).then((a) => {
        this._lang = t, this.data = a, l(this);
      }).catch((a) => r(a));
    });
  }
  get(...t) {
    const e = t.join(":");
    return this.data[e] || e;
  }
}
const b = {
  onDragStart: null,
  onDragging: null,
  onDragEnd: null
};
function L(n, t, e) {
  e = { ...b, ...e };
  const l = [...n.children].indexOf(t);
  return t.draggable = !0, t.ondragstart = (r) => {
    r.dataTransfer && (r.dataTransfer.effectAllowed = "move", r.dataTransfer.dropEffect = "move"), n.classList.add("ui-dragging"), e.onDragStart && e.onDragStart(l);
  }, t.ondragover = (r) => (r.preventDefault(), !1), t.ondragenter = (r) => {
    r.preventDefault(), [...n.children].forEach((a, s) => {
      if (s === l) {
        a.style.background = "var(--ui-primary)", a.style.color = "var(--ui-primary-text)";
        return;
      }
      a.style.background = "inherit", a.style.color = "inherit";
    }), e.onDragging && e.onDragging(l);
  }, t.ondrop = (r) => {
    r.preventDefault(), r.dataTransfer && (r.dataTransfer.dropEffect = "move"), n.classList.remove("ui-dragging"), e.onDragEnd && e.onDragEnd(l), [...n.children].forEach((a) => {
      a.style.background = "inherit", a.style.color = "inherit";
    });
  }, () => {
    t.draggable = !1, t.ondragstart = null, t.ondragover = null, t.ondragenter = null, t.ondrop = null;
  };
}
const S = {
  onDragStart: null,
  onDragEnd: null
};
function $(n, t) {
  t = { ...S, ...t };
  let e = null, l = null, r = null, a = !1, s = "", o = "";
  const u = (i) => {
    const f = i.currentTarget;
    !e && Array.from(f.classList).includes("draggable") && (l = (/* @__PURE__ */ new Date()).getTime(), e = f, r && clearTimeout(r), r = setTimeout(() => {
      e && (s = e.style.color, o = e.style.backgroundColor, e.style.color = "var(--ui-primary-text)", e.style.backgroundColor = "var(--ui-primary)", n.classList.add("ui-dragging"), a = !0, t != null && t.onDragStart && t.onDragStart());
    }, 200));
  }, g = (i) => {
    if (!l || !e) return;
    if (!a && (/* @__PURE__ */ new Date()).getTime() - l < 200) {
      d();
      return;
    }
    i.preventDefault(), a || (a = !0, t != null && t.onDragStart && t.onDragStart());
    let f;
    if (i instanceof TouchEvent) {
      const m = i.targetTouches[0];
      f = {
        clientX: m.clientX,
        clientY: m.clientY
      };
    } else
      f = {
        clientX: i.clientX,
        clientY: i.clientY
      };
    let c = document.elementFromPoint(f.clientX, f.clientY);
    if (c) {
      for (; !c.classList.contains("draggable") && c.parentElement; )
        c = c.parentElement;
      c.classList.contains("draggable") && ((() => {
        let h = e == null ? void 0 : e.previousElementSibling;
        for (; h; ) {
          if (h === c)
            return !0;
          h = h.previousElementSibling;
        }
        return !1;
      })() ? n.insertBefore(e, c) : n.insertBefore(e, c.nextElementSibling));
    }
  }, d = () => {
    r !== null && (clearTimeout(r), r = null), e && (e.style.color = s, e.style.backgroundColor = o, e = null), l = null, n.classList.remove("ui-dragging"), a && (a = !1, t != null && t.onDragEnd && t.onDragEnd());
  };
  return [...n.children].forEach((i) => {
    i.classList.add("draggable"), i.onmousedown = u, i.ontouchstart = u, i.onmousemove = g, i.ontouchmove = g, n.onmouseleave = i.onmouseup = d, i.ontouchend = d;
  }), () => {
    [...n.children].forEach((i) => {
      i.classList.remove("draggable"), i.onmousedown = null, i.ontouchstart = null, i.onmousemove = null, i.ontouchmove = null, n.onmouseleave = i.onmouseup = null, i.ontouchend = null;
    });
  };
}
const M = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createMobile: $,
  createNative: L
}, Symbol.toStringTag, { value: "Module" })), y = {
  color: "var(--ui-ripple-color, currentColor)",
  opacity: "var(--ui-ripple-opacity, 0.2)",
  centered: !1,
  spreadDuration: ".4s",
  spreadTiming: "linear",
  clearDuration: "1s",
  clearTiming: "ease-in-out",
  usePointer: !1
};
function T(n, t) {
  t = { ...y, ...t || {} };
  let e = null;
  const l = (o) => {
    e = p(o, t), n.addEventListener("pointermove", a);
  }, r = () => {
    n.removeEventListener("pointermove", a), v(e), e = null;
  }, a = () => r(), s = (o) => {
    e = p(o, t), v(e), e = null;
  };
  return n.classList.add("ripple-container"), n.style.overflow = "hidden", t.usePointer ? (n.addEventListener("pointerdown", l), n.addEventListener("pointerup", r), n.addEventListener("pointerleave", r)) : n.addEventListener("click", s), () => {
    if (n.classList.remove("ripple-container"), t.usePointer) {
      n.removeEventListener("pointerdown", l), n.removeEventListener("pointerup", r), n.removeEventListener("pointerleave", r), n.removeEventListener("pointermove", a);
      return;
    }
    n.removeEventListener("click", s);
  };
}
function p(n, t) {
  const e = document.createElement("div"), l = n.currentTarget;
  l.appendChild(e), e.classList.add("ripple"), e.style.position = "absolute", e.style.color = "inherit", e.style.borderRadius = "50%", e.style.pointerEvents = "none", e.style.width = "100px", e.style.height = "100px", e.style.marginTop = "-50px", e.style.marginLeft = "-50px", e.style.opacity = `${t.opacity}`, e.style.backgroundColor = `${t.color}`, e.style.transform = "scale(0) translate(0, 0)", e.style.transition = `transform ${t.spreadDuration} ${t.spreadTiming} 0s,opacity ${t.clearDuration} ${t.clearTiming} 0s`;
  const r = l.getBoundingClientRect();
  t.centered ? (e.style.top = `${r.height / 2}px`, e.style.left = `${r.width / 2}px`) : (e.style.top = `${n.clientY - r.top}px`, e.style.left = `${n.clientX - r.left}px`);
  const a = Math.max(r.width, r.height) * 0.02;
  return e.style.transform = `scale(${a}) translate(0, 0)`, e;
}
function v(n) {
  n && (n.addEventListener("transitionend", (t) => {
    t.propertyName === "opacity" && n.remove();
  }), n.style.opacity = "0");
}
const j = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  create: T,
  defaultOptions: y,
  start: p,
  stop: v
}, Symbol.toStringTag, { value: "Module" }));
function w(n, t) {
  let e = null;
  async function l(r) {
    var a, s;
    if (e !== null && (((a = e.template) == null ? void 0 : a.onDestroy) !== void 0 && e.template.onDestroy(), e.onDestroy !== void 0 && e.onDestroy()), e = r, e.title !== void 0) {
      const o = document.querySelector("head > title");
      o !== null && (o.innerHTML = e.title);
    }
    if ((e == null ? void 0 : e.href) !== void 0 && n) {
      const u = await (await fetch(e.href)).text();
      n.innerHTML = u, e.scripts !== void 0 && e.scripts.forEach((g) => {
        const d = document.createElement("script");
        d.setAttribute("data-template", e.href), d.src = g.src, n.appendChild(d);
      });
    }
    if ((e == null ? void 0 : e.onMount) !== void 0 && e.onMount(), e != null && e.template) {
      let o = n;
      if (e.template.target !== void 0 && (o = document.querySelector(e.template.target)), e.template.selector && o) {
        const u = document.querySelector(e.template.selector);
        if (!u)
          throw `${e.template.selector} not found`;
        u instanceof HTMLTemplateElement ? (o.innerHTML = "", o.appendChild(u.content.cloneNode(!0))) : o.innerHTML = u.innerHTML;
      }
      ((s = e.template) == null ? void 0 : s.onMount) !== void 0 && e.template.onMount();
    }
  }
  window.addEventListener("hashchange", () => {
    const r = window.location.hash.replace("#", "");
    let a = "";
    for (const s of Object.keys(t))
      r.startsWith(s) && s > a && (a = s);
    if (!a) {
      const s = t["/"];
      if (s === void 0) {
        console.warn(
          `Window location “${r}” is missing in routes, and the fallback route “/“ is also missing.`
        );
        return;
      }
      l(s);
      return;
    }
    l(t[a]);
  }), window.dispatchEvent(new Event("hashchange"));
}
function D(n, t) {
  let e;
  if (n ? e = `?${Object.entries(n).map(([l, r]) => `${encodeURIComponent(l)}=${encodeURIComponent(r)}`).join("&")}` : e = "", !t && !e) {
    location.hash = "";
    return;
  }
  location.hash = `#${encodeURIComponent(t)}` + (e ? `&${e}` : "");
}
function x() {
  const n = {};
  return location.hash.replace(/^#.*\?/, "").split("?").forEach((t) => {
    t.split("&").forEach((e) => {
      const [l, r] = e.split("=");
      n[decodeURIComponent(l)] = decodeURIComponent(r);
    });
  }), n;
}
const O = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getSearchParam: x,
  goTo: D,
  init: w
}, Symbol.toStringTag, { value: "Module" })), P = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  hash: O
}, Symbol.toStringTag, { value: "Module" }));
function I() {
  return /(android)/i.test(navigator.userAgent);
}
function R(n) {
  return Object.entries(n).map(([t, e]) => `${t.replace(/[A-Z]/g, (l) => `-${l.toLowerCase()}`)}:${e}`).join(";") + ";";
}
export {
  E as Events,
  C as LanguageHandler,
  _ as Store,
  M as draggable,
  I as isAndroid,
  j as ripple,
  P as router,
  R as styles
};
