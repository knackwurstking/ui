package components

import "github.com/knackwurstking/ui/pkg/css"

type ToastVariant string
type ToastPosition string

const (
	ToastVariantSuccess ToastVariant = css.ToastVariantSuccess
	ToastVariantWarning ToastVariant = css.ToastVariantWarning
	ToastVariantError   ToastVariant = css.ToastVariantError
	ToastVariantInfo    ToastVariant = css.ToastVariantInfo

	ToastPositionTopLeft      ToastPosition = css.ToastPositionTopLeft
	ToastPositionTopCenter    ToastPosition = css.ToastPositionTopCenter
	ToastPositionTopRight     ToastPosition = css.ToastPositionTopRight
	ToastPositionBottomLeft   ToastPosition = css.ToastPositionBottomLeft
	ToastPositionBottomCenter ToastPosition = css.ToastPositionBottomCenter
	ToastPositionBottomRight  ToastPosition = css.ToastPositionBottomRight
)

type ToastProps struct {
	*Props

	Variant  ToastVariant
	Position ToastPosition

	Title       string
	Description string
	Close       bool

	Show bool
}

templ Toast(props *ToastProps) {
	{{
		if props == nil {
			props = &ToastProps{}
		}
		if props.Props == nil {
			props.Props = NewProps()
		}
		props.SetClass(css.Toast)

		if props.Variant != "" {
			props.SetClass(string(props.Variant))
		}
		if props.Position != "" {
			props.SetClass(string(props.Position))
		}
		if props.Show {
			props.SetClass(css.ToastShow)
		} else {
			props.SetClass(css.ToastHide)
		}
	}}
	<div { props.Attributes()... }>
		<div class={ css.ToastContent }>
			if props.Title != "" {
				<div class={ css.ToastTitle }>{ props.Title }</div>
			}
			if props.Description != "" {
				<div class={ css.ToastDescription }>{ props.Description }</div>
			}
			{ children... }
		</div>
		if props.Close {
			<button
				class={ css.ToastClose }
				type="button"
				aria-label="Close"
				onclick="this.closest('.toast').remove()"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					width="16"
					height="16"
					fill="currentColor"
					class="bi bi-x"
					viewBox="0 0 16 16"
				>
					<path
						d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"
					></path>
				</svg>
			</button>
		}
	</div>
}

templ ToastStack(props *Props) {
	{{
		if props == nil {
			props = NewProps()
		}
		props.SetClass(css.ToastStack)
	}}
	<div { props.Attributes()... }>
		{ children... }
	</div>
}
