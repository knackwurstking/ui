(function(o,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(o=typeof globalThis<"u"?globalThis:o||self,f(o.ui={}))})(this,function(o){"use strict";class f{constructor(){this.listeners={}}addListener(t,e){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),()=>this.removeListener(t,e)}removeListener(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(l=>l!==e))}dispatch(t,e){this.listeners[t]&&this.listeners[t].forEach(l=>l(e))}}class L{constructor(t){this.prefix="",this.events=new f,this.data={},this.prefix=t}get(t,e){if(!(e!=null&&e.skipStore)){const l=localStorage.getItem(`${this.prefix}${t}`);if(l!==null)return JSON.parse(l)}if(this.data.hasOwnProperty(t))return this.data[t]}set(t,e,l=!1,n){if(l){let i=null;n!=null&&n.skipStore?i=null:i=localStorage.getItem(`${this.prefix}${t}`),i!==null?this.data[t]=JSON.parse(i):this.data.hasOwnProperty(t)||(this.data[t]=e)}else this.data[t]=e;n!=null&&n.skipStore||localStorage.setItem(`${this.prefix}${t}`,JSON.stringify(this.data[t])),this.events.dispatch(t,this.data[t])}update(t,e,l){const n=this.get(t,l);if(n===void 0)throw new Error(`"${t}" not found, use \`set\``);this.set(t,e(n),!1,l)}listen(t,e,l=!1,n){if(l){const i=this.get(t,n);i!==void 0&&setTimeout(()=>e(i))}return this.events.addListener(t,e)}}class S{constructor(){this.data={},this._lang=""}get lang(){return this._lang}use(t,e){return new Promise((l,n)=>{fetch(e).then(i=>i.json()).then(i=>{this._lang=t,this.data=i,l(this)}).catch(i=>n(i))})}get(...t){const e=t.join(":");return this.data[e]||e}}const T={onDragStart:null,onDragging:null,onDragEnd:null};function D(r,t,e){e={...T,...e};const l=[...r.children].indexOf(t);return t.draggable=!0,t.ondragstart=n=>{n.dataTransfer&&(n.dataTransfer.effectAllowed="move",n.dataTransfer.dropEffect="move"),r.classList.add("ui-dragging"),e.onDragStart&&e.onDragStart(l)},t.ondragover=n=>(n.preventDefault(),!1),t.ondragenter=n=>{n.preventDefault(),[...r.children].forEach((i,s)=>{if(s===l){i.style.background="var(--ui-primary)",i.style.color="var(--ui-primary-text)";return}i.style.background="inherit",i.style.color="inherit"}),e.onDragging&&e.onDragging(l)},t.ondrop=n=>{n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="move"),r.classList.remove("ui-dragging"),e.onDragEnd&&e.onDragEnd(l),[...r.children].forEach(i=>{i.style.background="inherit",i.style.color="inherit"})},()=>{t.draggable=!1,t.ondragstart=null,t.ondragover=null,t.ondragenter=null,t.ondrop=null}}const w={onDragStart:null,onDragEnd:null};function $(r,t){t={...w,...t};let e=null,l=null,n=null,i=!1,s="",u="";const E=a=>{const c=a.currentTarget;!e&&Array.from(c.classList).includes("draggable")&&(l=new Date().getTime(),e=c,n&&clearTimeout(n),n=setTimeout(()=>{e&&(s=e.style.color,u=e.style.backgroundColor,e.style.color="var(--ui-primary-text)",e.style.backgroundColor="var(--ui-primary)",r.classList.add("ui-dragging"),i=!0,t!=null&&t.onDragStart&&t.onDragStart())},200))},b=a=>{if(!l||!e)return;if(!i&&new Date().getTime()-l<200){v();return}a.preventDefault(),i||(i=!0,t!=null&&t.onDragStart&&t.onDragStart());let c;if(a instanceof TouchEvent){const p=a.targetTouches[0];c={clientX:p.clientX,clientY:p.clientY}}else c={clientX:a.clientX,clientY:a.clientY};let d=document.elementFromPoint(c.clientX,c.clientY);if(d){for(;!d.classList.contains("draggable")&&d.parentElement;)d=d.parentElement;d.classList.contains("draggable")&&((()=>{let g=e==null?void 0:e.previousElementSibling;for(;g;){if(g===d)return!0;g=g.previousElementSibling}return!1})()?r.insertBefore(e,d):r.insertBefore(e,d.nextElementSibling))}},v=()=>{n!==null&&(clearTimeout(n),n=null),e&&(e.style.color=s,e.style.backgroundColor=u,e=null),l=null,r.classList.remove("ui-dragging"),i&&(i=!1,t!=null&&t.onDragEnd&&t.onDragEnd())};return[...r.children].forEach(a=>{a.classList.add("draggable"),a.onmousedown=E,a.ontouchstart=E,a.onmousemove=b,a.ontouchmove=b,r.onmouseleave=a.onmouseup=v,a.ontouchend=v}),()=>{[...r.children].forEach(a=>{a.classList.remove("draggable"),a.onmousedown=null,a.ontouchstart=null,a.onmousemove=null,a.ontouchmove=null,r.onmouseleave=a.onmouseup=null,a.ontouchend=null})}}const x=Object.freeze(Object.defineProperty({__proto__:null,createMobile:$,createNative:D},Symbol.toStringTag,{value:"Module"})),y={color:"var(--ui-ripple-color, currentColor)",opacity:"var(--ui-ripple-opacity, 0.2)",centered:!1,spreadDuration:".4s",spreadTiming:"linear",clearDuration:"1s",clearTiming:"ease-in-out",usePointer:!1};function M(r,t){t={...y,...t||{}};let e=null;const l=u=>{e=h(u,t),r.addEventListener("pointermove",i)},n=()=>{r.removeEventListener("pointermove",i),m(e),e=null},i=()=>n(),s=u=>{e=h(u,t),m(e),e=null};return r.classList.add("ripple-container"),r.style.overflow="hidden",t.usePointer?(r.addEventListener("pointerdown",l),r.addEventListener("pointerup",n),r.addEventListener("pointerleave",n)):r.addEventListener("click",s),()=>{if(r.classList.remove("ripple-container"),t.usePointer){r.removeEventListener("pointerdown",l),r.removeEventListener("pointerup",n),r.removeEventListener("pointerleave",n),r.removeEventListener("pointermove",i);return}r.removeEventListener("click",s)}}function h(r,t){const e=document.createElement("div"),l=r.currentTarget;l.appendChild(e),e.classList.add("ripple"),e.style.position="absolute",e.style.color="inherit",e.style.borderRadius="50%",e.style.pointerEvents="none",e.style.width="100px",e.style.height="100px",e.style.marginTop="-50px",e.style.marginLeft="-50px",e.style.opacity=`${t.opacity}`,e.style.backgroundColor=`${t.color}`,e.style.transform="scale(0) translate(0, 0)",e.style.transition=`transform ${t.spreadDuration} ${t.spreadTiming} 0s,opacity ${t.clearDuration} ${t.clearTiming} 0s`;const n=l.getBoundingClientRect();t.centered?(e.style.top=`${n.height/2}px`,e.style.left=`${n.width/2}px`):(e.style.top=`${r.clientY-n.top}px`,e.style.left=`${r.clientX-n.left}px`);const i=Math.max(n.width,n.height)*.02;return e.style.transform=`scale(${i}) translate(0, 0)`,e}function m(r){r&&(r.addEventListener("transitionend",t=>{t.propertyName==="opacity"&&r.remove()}),r.style.opacity="0")}const O=Object.freeze(Object.defineProperty({__proto__:null,create:M,defaultOptions:y,start:h,stop:m},Symbol.toStringTag,{value:"Module"}));function _(r,t){let e=null;function l(n){if(n.template!==void 0){const i=document.querySelector(n.template);if(i===null)throw`${n.template} not found`;(e==null?void 0:e.onDestroy)!==void 0&&e.onDestroy(),e=null,i instanceof HTMLTemplateElement?(r.innerHTML="",r.appendChild(i.content.cloneNode(!0))):r.innerHTML=i.innerHTML,e=n,e.onMount!==void 0&&e.onMount();return}n.href!==void 0&&fetch(n.href).then(i=>i.text()).then(i=>{if(n.title!==void 0){const s=document.querySelector("head > title");s!==null&&(s.innerHTML=n.title)}(e==null?void 0:e.onDestroy)!==void 0&&e.onDestroy(),r.innerHTML=i,e=n,(e==null?void 0:e.onMount)!==void 0&&e.onMount(),n.scripts!==void 0&&n.scripts.forEach(s=>{const u=document.createElement("script");u.setAttribute("data-template",n.href),u.src=s.src,r.appendChild(u)})}).catch(i=>alert(i))}window.addEventListener("hashchange",()=>{const n=window.location.hash.replace("#",""),i=Object.keys(t).find(s=>n.startsWith(s));if(i===void 0){const s=t["/"];if(s===void 0){console.warn(`Window location “${n}” is missing in routes, and the fallback route “/“ is also missing.`);return}l(s);return}l(t[i])}),window.dispatchEvent(new Event("hashchange"))}const P=Object.freeze(Object.defineProperty({__proto__:null,hash:_},Symbol.toStringTag,{value:"Module"}));function j(){return/(android)/i.test(navigator.userAgent)}function C(r){return Object.entries(r).map(([t,e])=>`${t.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`)}:${e}`).join(";")+";"}o.Events=f,o.LanguageHandler=S,o.Store=L,o.draggable=x,o.isAndroid=j,o.ripple=O,o.router=P,o.styles=C,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
