(function(u,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):(u=typeof globalThis<"u"?globalThis:u||self,h(u.ui={}))})(this,function(u){"use strict";class h{constructor(){this.listeners={}}addListener(t,e){return this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),()=>this.removeListener(t,e)}removeListener(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(i=>i!==e))}dispatch(t,e){this.listeners[t]&&this.listeners[t].forEach(i=>i(e))}}class L{constructor(t){this.prefix="",this.events=new h,this.data={},this.prefix=t}get(t,e){if(!(e!=null&&e.skipStore)){const i=localStorage.getItem(`${this.prefix}${t}`);if(i!==null)return JSON.parse(i)}if(this.data.hasOwnProperty(t))return this.data[t]}set(t,e,i=!1,n){if(i){let a=null;n!=null&&n.skipStore?a=null:a=localStorage.getItem(`${this.prefix}${t}`),a!==null?this.data[t]=JSON.parse(a):this.data.hasOwnProperty(t)||(this.data[t]=e)}else this.data[t]=e;n!=null&&n.skipStore||localStorage.setItem(`${this.prefix}${t}`,JSON.stringify(this.data[t])),this.events.dispatch(t,this.data[t])}update(t,e,i){const n=this.get(t,i);if(n===void 0)throw new Error(`"${t}" not found, use \`set\``);this.set(t,e(n),!1,i)}listen(t,e,i=!1,n){if(i){const a=this.get(t,n);a!==void 0&&setTimeout(()=>e(a))}return this.events.addListener(t,e)}}class S{constructor(){this.data={},this._lang=""}get lang(){return this._lang}use(t,e){return new Promise((i,n)=>{fetch(e).then(a=>a.json()).then(a=>{this._lang=t,this.data=a,i(this)}).catch(a=>n(a))})}get(...t){const e=t.join(":");return this.data[e]||e}}const T={onDragStart:null,onDragging:null,onDragEnd:null};function w(r,t,e){e={...T,...e};const i=[...r.children].indexOf(t);return t.draggable=!0,t.ondragstart=n=>{n.dataTransfer&&(n.dataTransfer.effectAllowed="move",n.dataTransfer.dropEffect="move"),r.classList.add("ui-dragging"),e.onDragStart&&e.onDragStart(i)},t.ondragover=n=>(n.preventDefault(),!1),t.ondragenter=n=>{n.preventDefault(),[...r.children].forEach((a,s)=>{if(s===i){a.style.background="var(--ui-primary)",a.style.color="var(--ui-primary-text)";return}a.style.background="inherit",a.style.color="inherit"}),e.onDragging&&e.onDragging(i)},t.ondrop=n=>{n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="move"),r.classList.remove("ui-dragging"),e.onDragEnd&&e.onDragEnd(i),[...r.children].forEach(a=>{a.style.background="inherit",a.style.color="inherit"})},()=>{t.draggable=!1,t.ondragstart=null,t.ondragover=null,t.ondragenter=null,t.ondrop=null}}const $={onDragStart:null,onDragEnd:null};function D(r,t){t={...$,...t};let e=null,i=null,n=null,a=!1,s="",o="";const d=l=>{const g=l.currentTarget;!e&&Array.from(g.classList).includes("draggable")&&(i=new Date().getTime(),e=g,n&&clearTimeout(n),n=setTimeout(()=>{e&&(s=e.style.color,o=e.style.backgroundColor,e.style.color="var(--ui-primary-text)",e.style.backgroundColor="var(--ui-primary)",r.classList.add("ui-dragging"),a=!0,t!=null&&t.onDragStart&&t.onDragStart())},200))},m=l=>{if(!i||!e)return;if(!a&&new Date().getTime()-i<200){f();return}l.preventDefault(),a||(a=!0,t!=null&&t.onDragStart&&t.onDragStart());let g;if(l instanceof TouchEvent){const E=l.targetTouches[0];g={clientX:E.clientX,clientY:E.clientY}}else g={clientX:l.clientX,clientY:l.clientY};let c=document.elementFromPoint(g.clientX,g.clientY);if(c){for(;!c.classList.contains("draggable")&&c.parentElement;)c=c.parentElement;c.classList.contains("draggable")&&((()=>{let p=e==null?void 0:e.previousElementSibling;for(;p;){if(p===c)return!0;p=p.previousElementSibling}return!1})()?r.insertBefore(e,c):r.insertBefore(e,c.nextElementSibling))}},f=()=>{n!==null&&(clearTimeout(n),n=null),e&&(e.style.color=s,e.style.backgroundColor=o,e=null),i=null,r.classList.remove("ui-dragging"),a&&(a=!1,t!=null&&t.onDragEnd&&t.onDragEnd())};return[...r.children].forEach(l=>{l.classList.add("draggable"),l.onmousedown=d,l.ontouchstart=d,l.onmousemove=m,l.ontouchmove=m,r.onmouseleave=l.onmouseup=f,l.ontouchend=f}),()=>{[...r.children].forEach(l=>{l.classList.remove("draggable"),l.onmousedown=null,l.ontouchstart=null,l.onmousemove=null,l.ontouchmove=null,r.onmouseleave=l.onmouseup=null,l.ontouchend=null})}}const O=Object.freeze(Object.defineProperty({__proto__:null,createMobile:D,createNative:w},Symbol.toStringTag,{value:"Module"})),b={color:"var(--ui-ripple-color, currentColor)",opacity:"var(--ui-ripple-opacity, 0.2)",centered:!1,spreadDuration:".4s",spreadTiming:"linear",clearDuration:"1s",clearTiming:"ease-in-out",usePointer:!1};function M(r,t){t={...b,...t||{}};let e=null;const i=o=>{e=v(o,t),r.addEventListener("pointermove",a)},n=()=>{r.removeEventListener("pointermove",a),y(e),e=null},a=()=>n(),s=o=>{e=v(o,t),y(e),e=null};return r.classList.add("ripple-container"),r.style.overflow="hidden",t.usePointer?(r.addEventListener("pointerdown",i),r.addEventListener("pointerup",n),r.addEventListener("pointerleave",n)):r.addEventListener("click",s),()=>{if(r.classList.remove("ripple-container"),t.usePointer){r.removeEventListener("pointerdown",i),r.removeEventListener("pointerup",n),r.removeEventListener("pointerleave",n),r.removeEventListener("pointermove",a);return}r.removeEventListener("click",s)}}function v(r,t){const e=document.createElement("div"),i=r.currentTarget;i.appendChild(e),e.classList.add("ripple"),e.style.position="absolute",e.style.color="inherit",e.style.borderRadius="50%",e.style.pointerEvents="none",e.style.width="100px",e.style.height="100px",e.style.marginTop="-50px",e.style.marginLeft="-50px",e.style.opacity=`${t.opacity}`,e.style.backgroundColor=`${t.color}`,e.style.transform="scale(0) translate(0, 0)",e.style.transition=`transform ${t.spreadDuration} ${t.spreadTiming} 0s,opacity ${t.clearDuration} ${t.clearTiming} 0s`;const n=i.getBoundingClientRect();t.centered?(e.style.top=`${n.height/2}px`,e.style.left=`${n.width/2}px`):(e.style.top=`${r.clientY-n.top}px`,e.style.left=`${r.clientX-n.left}px`);const a=Math.max(n.width,n.height)*.02;return e.style.transform=`scale(${a}) translate(0, 0)`,e}function y(r){r&&(r.addEventListener("transitionend",t=>{t.propertyName==="opacity"&&r.remove()}),r.style.opacity="0")}const _=Object.freeze(Object.defineProperty({__proto__:null,create:M,defaultOptions:b,start:v,stop:y},Symbol.toStringTag,{value:"Module"}));function x(r,t){let e=null;async function i(n){var a,s;if(e!==null&&(((a=e.template)==null?void 0:a.onDestroy)!==void 0&&e.template.onDestroy(),e.onDestroy!==void 0&&e.onDestroy()),e=n,e.title!==void 0){const o=document.querySelector("head > title");o!==null&&(o.innerHTML=e.title)}if((e==null?void 0:e.href)!==void 0){const d=await(await fetch(e.href)).text();r.innerHTML=d,e.scripts!==void 0&&e.scripts.forEach(m=>{const f=document.createElement("script");f.setAttribute("data-template",e.href),f.src=m.src,r.appendChild(f)})}if((e==null?void 0:e.onMount)!==void 0&&e.onMount(),(e==null?void 0:e.template)!==void 0){let o=r;e.template.target!==void 0&&(o=document.querySelector(e.template.target));const d=document.querySelector(e.template.selector);if(d===null)throw`${e.template.selector} not found`;d instanceof HTMLTemplateElement?(o.innerHTML="",o.appendChild(d.content.cloneNode(!0))):o.innerHTML=d.innerHTML,((s=e.template)==null?void 0:s.onMount)!==void 0&&e.template.onMount()}}window.addEventListener("hashchange",()=>{const n=window.location.hash.replace("#","");let a="";for(const s of Object.keys(t))n.startsWith(s)&&s>a&&(a=s);if(!a){const s=t["/"];if(s===void 0){console.warn(`Window location “${n}” is missing in routes, and the fallback route “/“ is also missing.`);return}i(s);return}i(t[a])}),window.dispatchEvent(new Event("hashchange"))}function C(r,t){let e;if(r?e=`?${Object.entries(r).map(([i,n])=>`${encodeURIComponent(i)}=${encodeURIComponent(n)}`).join("&")}`:e="",!t&&!e){location.hash="";return}location.hash=`#${encodeURIComponent(t)}`+(e?`&${e}`:"")}function j(){const r={};return location.hash.replace(/^#.*\?/,"").split("?").forEach(t=>{t.split("&").forEach(e=>{const[i,n]=e.split("=");r[decodeURIComponent(i)]=decodeURIComponent(n)})}),r}const P=Object.freeze(Object.defineProperty({__proto__:null,hash:Object.freeze(Object.defineProperty({__proto__:null,getSearchParam:j,goTo:C,router:x},Symbol.toStringTag,{value:"Module"}))},Symbol.toStringTag,{value:"Module"}));function R(){return/(android)/i.test(navigator.userAgent)}function I(r){return Object.entries(r).map(([t,e])=>`${t.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}:${e}`).join(";")+";"}u.Events=h,u.LanguageHandler=S,u.Store=L,u.draggable=O,u.isAndroid=R,u.ripple=_,u.router=P,u.styles=I,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
